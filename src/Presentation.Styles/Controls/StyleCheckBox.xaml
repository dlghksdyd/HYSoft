<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:HYSoft.Presentation.Styles.Controls">

    <Style TargetType="{x:Type local:StyleCheckBox}">
        <Setter Property="Foreground" Value="{StaticResource {x:Static SystemColors.ControlTextBrushKey}}" />
        <Setter Property="VerticalAlignment" Value="Center" />
        <Setter Property="HorizontalAlignment" Value="Left" />
        <Setter Property="Padding" Value="4,0,0,0" />
        <Setter Property="Cursor" Value="Hand" />
        <Setter Property="TextPadding" Value="10 0 0 0" />
        <Setter Property="HoverBackground" Value="White" />
        <Setter Property="PressedBackground" Value="Gray" />
        <Setter Property="CheckBrush" Value="Black" />
        <Setter Property="CheckThickness" Value="3" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:StyleCheckBox}">
                    <Grid x:Name="Root" SnapsToDevicePixels="True">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="6" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <!--  박스  -->
                        <Border
                            x:Name="Box"
                            Width="{TemplateBinding BoxSize}"
                            Height="{TemplateBinding BoxSize}"
                            Padding="2"
                            Background="{TemplateBinding BoxBackground}"
                            BorderBrush="{TemplateBinding BoxBorderBrush}"
                            BorderThickness="{TemplateBinding BoxBorderThickness}"
                            CornerRadius="{TemplateBinding CornerRadius}">
                            <!--  체크 마크  -->
                            <Path
                                x:Name="CheckGlyph"
                                Grid.Column="0"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Data="M 4 10 L 8 14 L 14 6"
                                IsHitTestVisible="False"
                                Opacity="0"
                                Stretch="Uniform"
                                Stroke="{TemplateBinding CheckBrush}"
                                StrokeEndLineCap="Round"
                                StrokeLineJoin="Round"
                                StrokeStartLineCap="Round"
                                StrokeThickness="{TemplateBinding CheckThickness}" />
                        </Border>

                        <!--  Content  -->
                        <ContentPresenter
                            Grid.Column="2"
                            Margin="{TemplateBinding TextPadding}"
                            VerticalAlignment="Center"
                            RecognizesAccessKey="True" />

                        <!--  Focus 사각형  -->
                        <Rectangle
                            x:Name="FocusRect"
                            Grid.ColumnSpan="3"
                            IsHitTestVisible="False"
                            Opacity="0"
                            Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                            StrokeDashArray="1 2"
                            StrokeThickness="1" />
                    </Grid>

                    <ControlTemplate.Triggers>
                        <!--  체크 상태  -->
                        <Trigger Property="IsChecked" Value="True">
                            <Setter TargetName="CheckGlyph" Property="Opacity" Value="1" />
                        </Trigger>

                        <!--  Indeterminate  -->
                        <Trigger Property="IsChecked" Value="{x:Null}">
                            <Setter TargetName="CheckGlyph" Property="Data" Value="M 4 10 L 14 10" />
                            <Setter TargetName="CheckGlyph" Property="Opacity" Value="1" />
                        </Trigger>

                        <!--  마우스오버/프레스: TemplateBinding ❌, TemplatedParent 바인딩 ✅  -->
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Box" Property="Background" Value="{Binding HoverBackground, RelativeSource={RelativeSource TemplatedParent}}" />
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="Box" Property="Background" Value="{Binding PressedBackground, RelativeSource={RelativeSource TemplatedParent}}" />
                        </Trigger>

                        <!--  포커스 표시  -->
                        <Trigger Property="IsKeyboardFocused" Value="True">
                            <Setter TargetName="FocusRect" Property="Opacity" Value="0.6" />
                        </Trigger>

                        <!--  비활성화  -->
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Opacity" Value="{Binding DisabledOpacity, RelativeSource={RelativeSource TemplatedParent}}" />
                            <Setter TargetName="Box" Property="BorderBrush" Value="#FFC9C9C9" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>